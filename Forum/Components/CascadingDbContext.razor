@using Microsoft.EntityFrameworkCore
@* ReSharper disable once InconsistentNaming *@
@inject IDbContextFactory<Model.Database> DbContext
@implements IDisposable

<CascadingValue TValue="Model.Database" Value="@_dbContext" ChildContent="@ChildContent" />

@code {
    private Model.Database _dbContext;

    [Parameter]
    public RenderFragment ChildContent { get; set; }

    protected override void OnInitialized()
    {
        _dbContext = DbContext.CreateDbContext();
    }

    public void Dispose()
    {
        _dbContext?.Dispose();
    }
}